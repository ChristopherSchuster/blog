<p>
  <a href="http://gulpjs.com/"> Gulp  </a> es una librer&iacute;a nodejs para generar flujos de trabajo, en este 
  post veremos como compilar  <a href="http://lesscss.org/"> archivos less </a> para bootstrap.
</p>


<h2> Estructura del proyecto </h2>

<p>
    Dentro del directorio test tenemos un idex.html el cual usa el css de boostrap generado en public/css/bootstrap.css. 
    El directorio  bootstrap-3.3.2/less contiene los archivos less que deben ser compilados para generar el archivo css.
</p>

<pre>
    test/
    ├── bootstrap-3.3.2
    │   ├── dist
    │   ├── fonts
    │   ├── js
    │   ├── less
    │   │   ├── bootstrap.less
    │   │   ├── mixins.less
    └── index.html
    └── gulpfile.js
    └── public
        └── css

</pre>

<h2> Nuestro Objetivo </h2>

<p>
    Queremos leer el archivo <code> test/bootstrap-3.3.2/less/bootstrap.less </code> y generar <code> public/css/bootstrap.css </code>. Queremos hacerlo
    de forma automatica, de forma que cada vez que modifiquemos un archivo dentro del directorio <code> test/bootstrap-3.3.2/less/ </code> 
    el archivo  css sea regenerado.
</p>

<h2>  Instalaci&oacute;n de las librer&iacute;as </h2>

<pre>
    npm install less
    npm install gulp
    npm install gulp-less
    npm install gulp-sourcemaps
    npm install  gulp-watch
</pre>

<h2> Archivo Gulp </h2>

<p>
    Dentro del directorio test creamos un archivo llamado gulpfile.js:
</p>

<pre>
    var gulp = require('gulp');

    gulp.task('default', function() {
      // place code for your default task here
    });
</pre>

<h3> Compilando less </h3>

<pre>
    var gulp = require('gulp'),
        less = require('gulp-less'),
        path = require('path'),
        sourcemaps = require('gulp-sourcemaps'),
        less_paths = {};

    // paths where less files are allocated

    less_paths = [
            __dirname + '/bootstrap-3.3.2/less/bootstrap.less'
        ]

    gulp.task('default', ['less:static']);


    gulp.task('less:static', function () {
        return gulp.src(less_paths)
            .pipe(sourcemaps.init())
            .pipe(less())
            .pipe(sourcemaps.write('./'))
            .pipe(gulp.dest(__dirname + '/public/css'));

    });
</pre>

<p>
    Ahora podemos compilar y generar el archivo css ejecutando el comando <code> gulp</code> dentro del directorio test. 
    Gulp buscar&aacute; el archivo gulpfile.js  y ejecutar&aacute; las tareas definidas como default.
</p>

<h3> Detectando cambios y recompilando de forma autom&aacute;tica</h3>
<p>
    Podemos crear una tarea que  <strong>observe</strong>  cambios en los archivos less y regenere el css: 
</p>


<pre>
    gulp.task('check', function() {
        gulp.watch(watch_paths, ['less:static']);
    });
</pre>

<p>
    index.html es muy simple, solo importar archivos js y css de  bootstrap:
</p>

<pre>

<html>
    <head>
        <link rel="stylesheet/less" type="text/css" href="./public/css/bootstrap.css" />
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    </head>

    <body>

        <div class="row">
            <div class="btn-group" role="group" aria-label="...">
              <button type="button" class="btn btn-default">Left</button>
              <button type="button" class="btn btn-default">Middle</button>
              <button type="button" class="btn btn-default">Right</button>
            </div>
            <div class="col-xs-6 col-sm-3">.col-xs-6 .col-sm-3</div>
            <div class="col-xs-6 col-sm-3">.col-xs-6 .col-sm-3</div>

            <!-- Add the extra clearfix for only the required viewport -->
            <div class="clearfix visible-xs-block"></div>

            <div class="col-xs-6 col-sm-3">.col-xs-6 .col-sm-3</div>
           <div class="col-xs-6 col-sm-3">.col-xs-6 .col-sm-3</div>
        </div>
    </body>
</html>
</pre>


<p>
  El archivo <code> gulpfile.js </code> puede ser encontrado en este <a href="https://github.com/maigfrga/blog/blob/master/2015/02/gulp-less/gulpfile.js"> enlace. </a>
Muchas gracias a mi amigo <a href="https://www.linkedin.com/in/raulmr"> Ra&uacute;l </a> por ayudarme con este post.
</p>

<h2> References </h2>

<li>
    <a href="https://github.com/gulpjs/gulp/blob/master/docs/getting-started.md"> Gulp's documentation </a>
    <a href="http://lesscss.org/">Less Framework </a>
    <a href="https://github.com/plus3network/gulp-less"> Gulp less</a>
    <a href="http://www.smashingmagazine.com/2014/06/11/building-with-gulp/"> Building with gulp </a>
</li>
